{% extends 'layouts/base.html' %}
{% load widget_tweaks %}
{% block title %} Dashboard {% endblock %}
{% block extrastyle %}
<style>
  .float-right{
    float: right;
  }
</style>

{% endblock %}
{% block content %}
<main id="main" class="main">

  <div class="pagetitle">
    <div class="row">
        <div class="col-sm-10">
            <h1>Health Workers</h1>
            <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="dashboard">Home</a></li>
                <li class="breadcrumb-item active">Health Workers</li>
            </ol>
            </nav>
        </div>

       
    </div>
    
  </div><!-- End Page Title -->

  <section class="section dashboard">
    <div class="row">

        <div class="col-lg-12">
  
          <div class="card fixed" style="width:100%;">
            <div class="card fixed " style="width:100%;">
              <h5 class="card-title">Health Worker List Tables</h5>
              <p>This table shows all the list of health workers add in our system</p>
               <!-- success message  -->
               {% if messages %}
               <div class="alert alert-success bg-success text-light border-0 alert-dismissible fade show" role="alert">
                  {% for message in messages %}
                  {{ message }}
                  {% endfor %}
                 <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button>
               </div>
               {% endif %}
               <!-- success message -->
              
  
                <!-- Table with stripped rows -->
                <table class="table datatable">
                  <thead>
                    <tr>
                      <th scope="col">Username</th>
                      <th scope="col">Name</th>
                      <th scope="col">Father/Husband Name</th>
                      <th scope="col">CNIC</th>
                      <th scope="col">Phone</th>
                      <th scope="col">District</th>
                      <th scope="col">Tehsil</th>
                      <th scope="col">Union Council</th>
                      <th scope="col">Age</th>
                      <th scope="col">Retirement year</th>
                      <th scope="col">Is Retired?</th>
                      <th scope="col">Action</th>
                    </tr>
                    
                  </thead>
                  
                  <tbody>
                    <script>
  
                          
                          var s='{{total}}';
                          var s1=parseInt(s);
                          
                          A="Hello";
                          var x=0;
                          const idss=[];
                          
                    </script>  
                      {% for hw in healthworkers%}
                      <tr>
                        <td>{{hw.user}}</td>
                        <td>{{hw.name}}</td>
                        <td>{{hw.father_or_husband_name}}</td>
                        <td>{{hw.cnic}}</td>
                        <td>{{hw.phone}}</td>
                        <td>{{hw.district}}</td>
                        <td>{{hw.tehsil}}</td>
                        <td>{{hw.union_council}}</td>
                        <td>{{hw.age}}</td>
                        <td>{{hw.retirementyear}}</td>
                        <td>{{hw.isRetired}}</td>
                        
                        <td>
                          <a href="{% url 'view-health-worker' hw.pk %}" type="button" id="xyz" class="hello"><i class="bi bi-eye"></i></a>
                          <script>
                           x='{{forloop.counter}}';
                           y=parseInt(x);
                           var a='{{hw.age}}';
                           var b= parseInt(a);
                           
                           if (b>=59){
                            var e = document.getElementById("xyz");
                            e.id = "retire_"+x;
                          idss[y]=e.id;

                           }
                           else{
                            var e = document.getElementById("xyz");
                            e.id = "notretire_"+x;
                          idss[y]=e.id;
                           }
                          </script>
                          
                        </td>
                        
                      
                      {% endfor %}
                      <script>
                        var a1=1;
                        console.log(idss);   
                        for(a1=1; a1<s1+1;a1++){

                            var b= a1.toString();
                            if(idss[a1]=="retire_"+b){

                              document.getElementById(idss[a1]).className='btn btn-danger';   

                            }
                            else{
                            document.getElementById(idss[a1]).className='btn btn-primary';

                            }
                          }
                        
                          
                            
                      </script>
                      
                      </tr>
                      
                      
                    </tbody>
                </table>
                <!-- End Table with stripped rows -->
  
              </div>
            </div>
  
          </div>

    </div>
  </section>

</main>
{% endblock %}