{% extends 'layouts/base.html' %}

{% load static %}
{% block content %}
<main id="main" class="main">

    <div class="pagetitle">
      <h1>Health Worker</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item">Home</li>
          <li class="breadcrumb-item">Health Workers</li>
          <li class="breadcrumb-item active">Edit</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section profile">
      <div class="row">
       
        {% load widget_tweaks %}

        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Health Worker Edit form</h5>
            

            <form method="post" enctype="multipart/form-data" action="{% url 'edit-health-worker' hw.pk %}" >
              {% csrf_token %}
              <div class="row mb-3">
                <label for="inputEmail3" class="col-sm-2 col-form-label">Code</label>
                <div class="col-sm-10">
                  <input type="text" value="{{hw.code}}" name="code" class="form-control" id="inputEmail" required>
                </div>
              </div>
              

              <div class="row mb-3">
                <label for="inputEmail3" class="col-sm-2 col-form-label">Date of Birth (YY/MM/DD)</label>
                <div class="col-sm-10">
                  <input type="text" name="dateofbirth" value="{{A}}"  class="vDateField"  required=""  id="dob">
                 
                </div>
              </div>
              

              <div class="row mb-3">
                <label for="inputPassword3" class="col-sm-2 col-form-label">Name</label>
                <div class="col-sm-10">
                  <input type="text" value="{{hw.name}}" name="name" class="form-control" id="inputPassword" required>
                </div>
              </div>
              <div class="row mb-3">
                <label for="inputPassword4" class="col-sm-2 col-form-label">CNIC</label>
                <div class="col-sm-10">
                  <input type="text" value="{{hw.cnic}}" name="cnic" class="form-control" id="inputPassword4" required>
                </div>
              </div>

              <div class="row mb-3">
                <label for="inputPassword4" class="col-sm-2 col-form-label">Phone Number</label>
                <div class="col-sm-10">
                  <input type="text" value="{{hw.phone}}" name="phone" class="form-control" id="inputPassword4" required>
                </div>
              </div>

              <div class="row mb-3">
                <label for="inputText" class="col-sm-2 col-form-label">Father or Husband Name:</label>
                <div class="col-sm-10">
                  <input type="text" value="{{hw.father_or_husband_name}}" name="father_or_husband_name" class="form-control" required>
                </div>
              </div>

              <div class="row mb-3">
                <label for="inputText" class="col-sm-2 col-form-label">Attached Facility</label>
                <div class="col-sm-10">
                  <input type="text" value="{{hw.attached_facility}}" name="attached_facility" class="form-control" required>
                </div>
              </div>

              <div class="row mb-3">
                <label for="inputText" class="col-sm-2 col-form-label">Union Council</label>
                <div class="col-sm-10">
                  <input type="text" value="{{hw.union_council}}" name="union_council" class="form-control" required>
                </div>
              </div>

              <div class="row mb-3">
                <label for="inputText" class="col-sm-2 col-form-label">Tehsil</label>
                <div class="col-sm-10">
                  <input type="text" value="{{hw.tehsil}}" name="tehsil" class="form-control" required>
                </div>
              </div>

              <div class="row mb-3">
                <label for="inputText" class="col-sm-2 col-form-label">Catchment of population of flcf</label>
                <div class="col-sm-10">
                  <input type="text" value="{{hw.catchment_of_population_of_flcf}}" name="catchment_of_population_of_flcf" class="form-control" required>
                </div>
              </div>

              <div class="row mb-3">
                <label class="col-sm-2 col-form-label">Districts</label>
                <div class="col-sm-10">
                  <select class="form-select" name="district" aria-label="multiple select example" required>
                    <option selected value="{{hw.district.pk}}">{{hw.district}}</option>
                   {% for dis in districts %}
                   <option value="{{dis.pk}}">{{dis.district}}</option>
                   {% endfor %}
                  </select>
                </div>
              </div>

              <div class="row mb-3">
                <label for="inputText" class="col-sm-2 col-form-label">Population registered by lhws</label>
                <div class="col-sm-10">
                  <input type="text" value="{{hw.population_registered_by_lhws}}" name="population_registered_by_lhws" class="form-control" required>
                </div>
              </div>

              <div class="row mb-3">
                <label for="inputNumber" class="col-sm-2 col-form-label">Image</label>
                <div class="col-sm-10">
                  <input class="form-control mb-3" name="thumbnail" type="file" id="formFile">
                  <span id="current">Currrently:</span>
                  <br>
                  <img class="mb-1" id="blah" width="150" height="150" src="{{hw.thumbnail.url }}" alt="your image" /><br>
                  <button style="display:none" id="delimg" type="button" class="btn btn-danger"><i class="bi bi-trash"></i></button>
                </div>
                
              </div>
              
              <div class="text-center">
                <button type="submit" class="btn btn-primary" >Submit</button>
                <!-- <button type="reset" class="btn btn-secondary">Reset</button> -->
              </div>
            </form>
          </div>
        </div>

          


      </div>
    </section>

  </main>
{% endblock %}

{% block extrascripts %}
<script src="{% static 'assets/js/jquery-3.6.0.min.js' %}"></script>

<script>
    $(function(){
      var orgpath = $('#blah').src;
      $('#formFile').change(function(){
        const [file] = formFile.files
        if (file) {
          blah.src = URL.createObjectURL(file)
  
        }
  
        $('#delimg').css('display','block');
        $('#blah').css('display','block');
      })
  
          $('#delimg').click(function(){
            blah.src = orgpath
            $('#formFile').val("");
            $('#current').css('display', 'none');
            $('#delimg').css('display','none');
            $('#blah').css('display','none');
  
        })
    })
  
    
  </script>
{% endblock %}